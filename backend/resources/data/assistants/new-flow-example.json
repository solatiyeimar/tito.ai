{
  "id": "new-flow-example-2025",
  "name": "Demostraci\u00f3n Avanzada de Flujo (Nuevas Convenciones)",
  "description": "Demostraci\u00f3n de las nuevas convenciones de flujos Pipecat con todas las caracter\u00edsticas: estrategias de contexto, acciones, funciones directas y configuraciones avanzadas de nodos.",
  "architecture_type": "flow",
  "pipeline_settings": {
    "speak_first": true,
    "enable_stt_mute_filter": true,
    "initial_message": null,
    "initial_delay": 0.0,
    "initial_message_interruptible": true,
    "inactivity_messages": []
  },
  "agent": {
    "provider": "openai",
    "model": "gpt-5o",
    "temperature": 0.7,
    "system_prompt": "# Identidad\n- Eres un \"Asistente de Demostraci\u00f3n de Flujos Avanzados\" especializado en mostrar las \u00faltimas capacidades de Pipecat.\n- Tu rol principal es demostrar caracter\u00edsticas avanzadas de flujo de conversaci\u00f3n.\n- Debes ser educativo, t\u00e9cnico y entusiasta, manteniendo un tono profesional pero accesible.\n- Tu objetivo es ense\u00f1ar las nuevas convenciones de flujos de manera pr\u00e1ctica.\n\n# Objetivos\n- Objetivo Principal: Demostrar efectivamente las capacidades avanzadas de los flujos Pipecat.\n- Objetivos Secundarios:\n  - Mostrar estrategias de contexto en acci\u00f3n\n  - Ejemplificar el uso de acciones pre/post\n  - Demostrar configuraciones sofisticadas de nodos\n  - Ense\u00f1ar gesti\u00f3n avanzada de conversaciones\n\n# Gu\u00edas de Estilo\n- Mant\u00e9n un tono educativo, t\u00e9cnico y entusiasta\n- Explica conceptos de manera clara y pr\u00e1ctica\n- Utiliza ejemplos en tiempo real durante la demostraci\u00f3n\n- Haz pausas para permitir comprensi\u00f3n\n\n# Restricciones\n- Responde \u00fanicamente en espa\u00f1ol\n- Enf\u00f3cate solo en caracter\u00edsticas de flujos Pipecat\n- Mant\u00e9n las demostraciones pr\u00e1cticas y aplicables\n- No te desv\u00edes del tema de flujos\n\n# Variables de Entrada\n- {{current_time}}: Hora y fecha actual\n- {{contact_name}}: Nombre del usuario si est\u00e1 disponible"
  },
  "io_layer": {
    "type": "webrtc",
    "transport": {
      "provider": "daily"
    },
    "stt": {
      "provider": "deepgram",
      "model": "nova-3-general",
      "language": "es"
    },
    "tts": {
      "provider": "cartesia",
      "voice_id": "79a125e8-cd45-4c13-8a67-188112f4dd22",
      "speed": 1.0,
      "language": "es"
    }
  },
  "webhooks": {
    "url": "https://bold-aurora-35.webhook.cool",
    "events": [
      "call_started",
      "call_ended",
      "function_called",
      "node_transition"
    ]
  },
  "flow": {
    "nodes": [
      {
        "id": "welcome",
        "type": "initial",
        "data": {
          "role_messages": [
            {
              "role": "system",
              "content": "Eres un asistente de demostraci\u00f3n de flujos avanzados. Muestras las \u00faltimas capacidades de flujos Pipecat incluyendo estrategias de contexto, acciones pre/post y gesti\u00f3n sofisticada de conversaciones."
            }
          ],
          "task_messages": [
            {
              "role": "system",
              "content": "Da la bienvenida al usuario a la demostraci\u00f3n de flujos avanzados. Explica que mostrar\u00e1s diferentes caracter\u00edsticas de flujo y pregunta qu\u00e9 les gustar\u00eda explorar: gesti\u00f3n de contexto, acciones, o flujo de conversaci\u00f3n."
            }
          ],
          "functions": [
            {
              "name": "select_demo_feature",
              "description": "Seleccionar qu\u00e9 caracter\u00edstica de flujo demostrar",
              "properties": {
                "feature": {
                  "type": "string",
                  "enum": [
                    "context_strategies",
                    "actions",
                    "conversation_flow",
                    "all_features"
                  ],
                  "description": "La caracter\u00edstica de flujo a demostrar"
                },
                "user_preference": {
                  "type": "string",
                  "description": "Cualquier preferencia espec\u00edfica o inter\u00e9s que mencion\u00f3 el usuario"
                }
              },
              "required": [
                "feature"
              ],
              "next_node_id": "feature_demo"
            }
          ],
          "pre_actions": [
            {
              "type": "tts_say",
              "text": "Inicializando demostraci\u00f3n de flujos avanzados..."
            }
          ],
          "respond_immediately": true
        }
      },
      {
        "id": "feature_demo",
        "type": "standard",
        "data": {
          "task_messages": [
            {
              "role": "system",
              "content": "Demuestra la caracter\u00edstica de flujo seleccionada. Proporciona explicaciones detalladas y ejemplos. Muestra c\u00f3mo funciona la caracter\u00edstica en la pr\u00e1ctica y sus beneficios para la gesti\u00f3n de conversaciones."
            }
          ],
          "functions": [
            {
              "name": "complete_demonstration",
              "description": "Completar la demostraci\u00f3n de la caracter\u00edstica y recopilar comentarios",
              "properties": {
                "demonstration_complete": {
                  "type": "boolean",
                  "description": "Si la demostraci\u00f3n est\u00e1 completa"
                },
                "user_understanding": {
                  "type": "string",
                  "enum": [
                    "excellent",
                    "good",
                    "needs_clarification"
                  ],
                  "description": "Nivel de comprensi\u00f3n del usuario"
                },
                "next_action": {
                  "type": "string",
                  "enum": [
                    "another_feature",
                    "deeper_dive",
                    "questions",
                    "conclude"
                  ],
                  "description": "Qu\u00e9 quiere hacer el usuario a continuaci\u00f3n"
                }
              },
              "required": [
                "demonstration_complete",
                "user_understanding",
                "next_action"
              ],
              "next_node_id": "context_reset_demo"
            }
          ],
          "context_strategy": {
            "strategy": "append"
          }
        }
      },
      {
        "id": "context_reset_demo",
        "type": "standard",
        "data": {
          "task_messages": [
            {
              "role": "system",
              "content": "Este nodo demuestra la funcionalidad de reinicio de contexto. Nota c\u00f3mo el contexto de conversaci\u00f3n se ha reiniciado, pero la informaci\u00f3n clave se preserva a trav\u00e9s de un resumen. Pregunta al usuario si nota la diferencia en c\u00f3mo se gestiona el contexto aqu\u00ed."
            }
          ],
          "functions": [
            {
              "name": "evaluate_context_demo",
              "description": "Evaluar la comprensi\u00f3n del usuario sobre la gesti\u00f3n de contexto",
              "properties": {
                "context_understanding": {
                  "type": "boolean",
                  "description": "Si el usuario entiende la demostraci\u00f3n de reinicio de contexto"
                },
                "wants_more_examples": {
                  "type": "boolean",
                  "description": "Si el usuario quiere ver m\u00e1s ejemplos"
                }
              },
              "required": [
                "context_understanding",
                "wants_more_examples"
              ],
              "next_node_id": "final_demo"
            }
          ],
          "context_strategy": {
            "strategy": "reset_with_summary",
            "summary_prompt": "Proporciona un resumen conciso de las caracter\u00edsticas de demostraci\u00f3n de flujo discutidas hasta ahora, enfoc\u00e1ndote en conceptos clave que el usuario aprendi\u00f3."
          }
        }
      },
      {
        "id": "final_demo",
        "type": "standard",
        "data": {
          "task_messages": [
            {
              "role": "system",
              "content": "Concluye la demostraci\u00f3n resumiendo todas las caracter\u00edsticas avanzadas de flujo mostradas: estrategias de contexto, acciones pre/post, configuraciones sofisticadas de nodos y gesti\u00f3n de conversaciones. Pregunta por preguntas finales."
            }
          ],
          "functions": [
            {
              "name": "conclude_demo",
              "description": "Concluir la sesi\u00f3n de demostraci\u00f3n",
              "properties": {
                "user_satisfaction": {
                  "type": "string",
                  "enum": [
                    "very_satisfied",
                    "satisfied",
                    "neutral",
                    "needs_improvement"
                  ],
                  "description": "Satisfacci\u00f3n del usuario con la demostraci\u00f3n"
                },
                "final_questions": {
                  "type": "boolean",
                  "description": "Si el usuario tiene preguntas finales"
                }
              },
              "required": [
                "user_satisfaction",
                "final_questions"
              ],
              "next_node_id": "goodbye"
            }
          ],
          "pre_actions": [
            {
              "type": "tts_say",
              "text": "Preparando resumen final de la demostraci\u00f3n..."
            }
          ]
        }
      },
      {
        "id": "goodbye",
        "type": "terminal",
        "data": {
          "task_messages": [
            {
              "role": "system",
              "content": "Agradece al usuario por participar en la demostraci\u00f3n de flujos avanzados. Destaca los beneficios clave de las nuevas convenciones de flujos Pipecat que han experimentado."
            }
          ],
          "pre_actions": [
            {
              "type": "tts_say",
              "text": "\u00a1Gracias por explorar las funciones avanzadas de flujo conmigo!"
            }
          ],
          "post_actions": [
            {
              "type": "end_conversation"
            }
          ],
          "respond_immediately": true
        }
      }
    ]
  }
}